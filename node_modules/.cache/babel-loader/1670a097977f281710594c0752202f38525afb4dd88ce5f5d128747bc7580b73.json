{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nexport const requestNotificationPermission = async () => {\n  if (!(\"Notification\" in window)) {\n    console.log(\"This browser does not support notifications\");\n    return false;\n  }\n  const permission = await Notification.requestPermission();\n  return permission === \"granted\";\n};\nexport const sendNotification = (title, body) => {\n  if (Notification.permission === \"granted\") {\n    new Notification(title, {\n      body,\n      icon: '/favicon.ico'\n    });\n  }\n};\nexport const checkDueTodos = todos => {\n  const now = new Date();\n  todos.forEach(todo => {\n    if (todo.dueDate && !todo.completed) {\n      const dueDate = new Date(todo.dueDate);\n      const timeDiff = dueDate.getTime() - now.getTime();\n      const hoursDiff = timeDiff / (1000 * 3600);\n\n      // Notify if due within 24 hours\n      if (hoursDiff > 0 && hoursDiff <= 24) {\n        sendNotification(\"Todo Due Soon!\", `\"${todo.title}\" is due in ${Math.round(hoursDiff)} hours`);\n      }\n    }\n  });\n};\nexport const useNotifications = todos => {\n  _s();\n  useEffect(() => {\n    const checkPermissionAndSetup = async () => {\n      const hasPermission = await requestNotificationPermission();\n      if (hasPermission) {\n        // Check todos every hour\n        const interval = setInterval(() => {\n          checkDueTodos(todos);\n        }, 3600000); // 1 hour\n\n        return () => clearInterval(interval);\n      }\n    };\n    checkPermissionAndSetup();\n  }, [todos]);\n};\n_s(useNotifications, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"names":["useEffect","requestNotificationPermission","window","console","log","permission","Notification","requestPermission","sendNotification","title","body","icon","checkDueTodos","todos","now","Date","forEach","todo","dueDate","completed","timeDiff","getTime","hoursDiff","Math","round","useNotifications","_s","checkPermissionAndSetup","hasPermission","interval","setInterval","clearInterval"],"sources":["C:/Users/hk231/OneDrive/Desktop/to do app/src/services/NotificationService.js"],"sourcesContent":["import { useEffect } from 'react';\r\n\r\nexport const requestNotificationPermission = async () => {\r\n  if (!(\"Notification\" in window)) {\r\n    console.log(\"This browser does not support notifications\");\r\n    return false;\r\n  }\r\n\r\n  const permission = await Notification.requestPermission();\r\n  return permission === \"granted\";\r\n};\r\n\r\nexport const sendNotification = (title, body) => {\r\n  if (Notification.permission === \"granted\") {\r\n    new Notification(title, {\r\n      body,\r\n      icon: '/favicon.ico'\r\n    });\r\n  }\r\n};\r\n\r\nexport const checkDueTodos = (todos) => {\r\n  const now = new Date();\r\n  todos.forEach(todo => {\r\n    if (todo.dueDate && !todo.completed) {\r\n      const dueDate = new Date(todo.dueDate);\r\n      const timeDiff = dueDate.getTime() - now.getTime();\r\n      const hoursDiff = timeDiff / (1000 * 3600);\r\n\r\n      // Notify if due within 24 hours\r\n      if (hoursDiff > 0 && hoursDiff <= 24) {\r\n        sendNotification(\r\n          \"Todo Due Soon!\",\r\n          `\"${todo.title}\" is due in ${Math.round(hoursDiff)} hours`\r\n        );\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nexport const useNotifications = (todos) => {\r\n  useEffect(() => {\r\n    const checkPermissionAndSetup = async () => {\r\n      const hasPermission = await requestNotificationPermission();\r\n      if (hasPermission) {\r\n        // Check todos every hour\r\n        const interval = setInterval(() => {\r\n          checkDueTodos(todos);\r\n        }, 3600000); // 1 hour\r\n\r\n        return () => clearInterval(interval);\r\n      }\r\n    };\r\n\r\n    checkPermissionAndSetup();\r\n  }, [todos]);\r\n};"],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AAEjC,OAAO,MAAMC,6BAA6B,GAAG,MAAAA,CAAA,KAAY;EACvD,IAAI,EAAE,cAAc,IAAIC,MAAM,CAAC,EAAE;IAC/BC,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;IAC1D,OAAO,KAAK;EACd;EAEA,MAAMC,UAAU,GAAG,MAAMC,YAAY,CAACC,iBAAiB,CAAC,CAAC;EACzD,OAAOF,UAAU,KAAK,SAAS;AACjC,CAAC;AAED,OAAO,MAAMG,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,IAAI,KAAK;EAC/C,IAAIJ,YAAY,CAACD,UAAU,KAAK,SAAS,EAAE;IACzC,IAAIC,YAAY,CAACG,KAAK,EAAE;MACtBC,IAAI;MACJC,IAAI,EAAE;IACR,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMC,aAAa,GAAIC,KAAK,IAAK;EACtC,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtBF,KAAK,CAACG,OAAO,CAACC,IAAI,IAAI;IACpB,IAAIA,IAAI,CAACC,OAAO,IAAI,CAACD,IAAI,CAACE,SAAS,EAAE;MACnC,MAAMD,OAAO,GAAG,IAAIH,IAAI,CAACE,IAAI,CAACC,OAAO,CAAC;MACtC,MAAME,QAAQ,GAAGF,OAAO,CAACG,OAAO,CAAC,CAAC,GAAGP,GAAG,CAACO,OAAO,CAAC,CAAC;MAClD,MAAMC,SAAS,GAAGF,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC;;MAE1C;MACA,IAAIE,SAAS,GAAG,CAAC,IAAIA,SAAS,IAAI,EAAE,EAAE;QACpCd,gBAAgB,CACd,gBAAgB,EAChB,IAAIS,IAAI,CAACR,KAAK,eAAec,IAAI,CAACC,KAAK,CAACF,SAAS,CAAC,QACpD,CAAC;MACH;IACF;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMG,gBAAgB,GAAIZ,KAAK,IAAK;EAAAa,EAAA;EACzC1B,SAAS,CAAC,MAAM;IACd,MAAM2B,uBAAuB,GAAG,MAAAA,CAAA,KAAY;MAC1C,MAAMC,aAAa,GAAG,MAAM3B,6BAA6B,CAAC,CAAC;MAC3D,IAAI2B,aAAa,EAAE;QACjB;QACA,MAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAM;UACjClB,aAAa,CAACC,KAAK,CAAC;QACtB,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;;QAEb,OAAO,MAAMkB,aAAa,CAACF,QAAQ,CAAC;MACtC;IACF,CAAC;IAEDF,uBAAuB,CAAC,CAAC;EAC3B,CAAC,EAAE,CAACd,KAAK,CAAC,CAAC;AACb,CAAC;AAACa,EAAA,CAhBWD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}