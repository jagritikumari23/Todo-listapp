{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { db } from '../firebase';\nimport { collection, query, where, onSnapshot, addDoc, updateDoc, deleteDoc, doc } from 'firebase/firestore';\nimport { useAuth } from '../contexts/AuthContext';\nexport function useTodos() {\n  _s();\n  const [todos, setTodos] = useState([]);\n  const {\n    currentUser\n  } = useAuth();\n  useEffect(() => {\n    if (!currentUser) return;\n    const q = query(collection(db, 'todos'), where('userId', '==', currentUser.uid));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const todosData = snapshot.docs.map(doc => ({\n        ...doc.data(),\n        id: doc.id\n      }));\n      setTodos(todosData);\n    });\n    return () => unsubscribe();\n  }, [currentUser]);\n  const addTodo = async (title, desc, category, dueDate) => {\n    await addDoc(collection(db, 'todos'), {\n      userId: currentUser.uid,\n      title,\n      desc,\n      category: category || \"personal\",\n      dueDate: dueDate || null,\n      completed: false,\n      createdAt: new Date()\n    });\n  };\n  const deleteTodo = async todoId => {\n    await deleteDoc(doc(db, 'todos', todoId));\n  };\n  const updateTodo = async (todoId, updates) => {\n    await updateDoc(doc(db, 'todos', todoId), updates);\n  };\n  return {\n    todos,\n    addTodo,\n    deleteTodo,\n    updateTodo\n  };\n}\n_s(useTodos, \"hTrKvB+98eytHti9cmAReMTPJGc=\", false, function () {\n  return [useAuth];\n});","map":{"version":3,"names":["useState","useEffect","db","collection","query","where","onSnapshot","addDoc","updateDoc","deleteDoc","doc","useAuth","useTodos","_s","todos","setTodos","currentUser","q","uid","unsubscribe","snapshot","todosData","docs","map","data","id","addTodo","title","desc","category","dueDate","userId","completed","createdAt","Date","deleteTodo","todoId","updateTodo","updates"],"sources":["C:/Users/hk231/OneDrive/Desktop/to do app/src/hooks/useTodos.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { db } from '../firebase';\r\nimport { collection, query, where, onSnapshot, addDoc, updateDoc, deleteDoc, doc } from 'firebase/firestore';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport function useTodos() {\r\n  const [todos, setTodos] = useState([]);\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n\r\n    const q = query(collection(db, 'todos'), where('userId', '==', currentUser.uid));\r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const todosData = snapshot.docs.map(doc => ({\r\n        ...doc.data(),\r\n        id: doc.id\r\n      }));\r\n      setTodos(todosData);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [currentUser]);\r\n\r\n  const addTodo = async (title, desc, category, dueDate) => {\r\n    await addDoc(collection(db, 'todos'), {\r\n      userId: currentUser.uid,\r\n      title,\r\n      desc,\r\n      category: category || \"personal\",\r\n      dueDate: dueDate || null,\r\n      completed: false,\r\n      createdAt: new Date()\r\n    });\r\n  };\r\n\r\n  const deleteTodo = async (todoId) => {\r\n    await deleteDoc(doc(db, 'todos', todoId));\r\n  };\r\n\r\n  const updateTodo = async (todoId, updates) => {\r\n    await updateDoc(doc(db, 'todos', todoId), updates);\r\n  };\r\n\r\n  return { todos, addTodo, deleteTodo, updateTodo };\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,EAAE,QAAQ,aAAa;AAChC,SAASC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,UAAU,EAAEC,MAAM,EAAEC,SAAS,EAAEC,SAAS,EAAEC,GAAG,QAAQ,oBAAoB;AAC5G,SAASC,OAAO,QAAQ,yBAAyB;AAEjD,OAAO,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACzB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM;IAAEgB;EAAY,CAAC,GAAGL,OAAO,CAAC,CAAC;EAEjCV,SAAS,CAAC,MAAM;IACd,IAAI,CAACe,WAAW,EAAE;IAElB,MAAMC,CAAC,GAAGb,KAAK,CAACD,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC,EAAEG,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEW,WAAW,CAACE,GAAG,CAAC,CAAC;IAChF,MAAMC,WAAW,GAAGb,UAAU,CAACW,CAAC,EAAGG,QAAQ,IAAK;MAC9C,MAAMC,SAAS,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAACb,GAAG,KAAK;QAC1C,GAAGA,GAAG,CAACc,IAAI,CAAC,CAAC;QACbC,EAAE,EAAEf,GAAG,CAACe;MACV,CAAC,CAAC,CAAC;MACHV,QAAQ,CAACM,SAAS,CAAC;IACrB,CAAC,CAAC;IAEF,OAAO,MAAMF,WAAW,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACH,WAAW,CAAC,CAAC;EAEjB,MAAMU,OAAO,GAAG,MAAAA,CAAOC,KAAK,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,OAAO,KAAK;IACxD,MAAMvB,MAAM,CAACJ,UAAU,CAACD,EAAE,EAAE,OAAO,CAAC,EAAE;MACpC6B,MAAM,EAAEf,WAAW,CAACE,GAAG;MACvBS,KAAK;MACLC,IAAI;MACJC,QAAQ,EAAEA,QAAQ,IAAI,UAAU;MAChCC,OAAO,EAAEA,OAAO,IAAI,IAAI;MACxBE,SAAS,EAAE,KAAK;MAChBC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,UAAU,GAAG,MAAOC,MAAM,IAAK;IACnC,MAAM3B,SAAS,CAACC,GAAG,CAACR,EAAE,EAAE,OAAO,EAAEkC,MAAM,CAAC,CAAC;EAC3C,CAAC;EAED,MAAMC,UAAU,GAAG,MAAAA,CAAOD,MAAM,EAAEE,OAAO,KAAK;IAC5C,MAAM9B,SAAS,CAACE,GAAG,CAACR,EAAE,EAAE,OAAO,EAAEkC,MAAM,CAAC,EAAEE,OAAO,CAAC;EACpD,CAAC;EAED,OAAO;IAAExB,KAAK;IAAEY,OAAO;IAAES,UAAU;IAAEE;EAAW,CAAC;AACnD;AAACxB,EAAA,CAxCeD,QAAQ;EAAA,QAEED,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}